---
output: github_document
---

<!-- README.md is generated from README.Rmd. Please edit this file -->

```{r setup, include=FALSE}
lgr::get_logger("mlr3")$set_threshold("warn")
lgr::get_logger("mlr3spatial")$set_threshold("warn")
set.seed(1)
options(width = 80)

knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  fig.path = "man/figures/README-",
  out.width = "100%"
)
REBUILD = TRUE
RECREATE_ALL_2DFIGS = FALSE
```

# vistool

<!-- badges: start -->
[![r-cmd-check](https://github.com/slds-lmu/vistool/actions/workflows/r-cmd-check.yaml/badge.svg)](https://github.com/slds-lmu/vistool/actions/workflows/r-cmd-check.yaml)
<!-- badges: end -->

`vistool` helps you explore optimization concepts and model behavior with a consistent R6 API. Use it to:

- visualize regression and classification loss functions;
- inspect one- and two-dimensional objectives, including custom definitions;
- follow optimization traces for gradient descent, momentum, and Nesterov variants;
- compare model prediction surfaces and decision boundaries.

Every visualizer follows a three-step workflow: initialize with `as_visualizer()`, add optional layers, then render via `plot()` (and optionally `save()`).

## Example

```{r quick-start, eval=TRUE, out.height='700px'}
library(vistool)

objective = obj("TF_GoldsteinPriceLog")
vis = as_visualizer(objective)
opt = OptimizerGD$new(objective, x_start = c(0.22, 0.77), lr = 0.01)
opt$optimize(10L)
vis$add_optimization_trace(opt, name = "GD")
vis$plot()
```

## Installation

You can install the development version from GitHub with [`pak`](https://pak.r-lib.org/):

```{r install, eval=FALSE}
# install.packages("pak")
pak::pak("slds-lmu/vistool")
```

Prefer base R tooling? `remotes::install_github("slds-lmu/vistool")` works as well.

### Plotly backend, MathJax, and static export

Plotly surfaces receive MathJax automatically whenever a label contains LaTeX markers. Control the MathJax source globally via `options(vistool.mathjax = "cdn")` (default), `"local"` to reuse a system installation, or a fully qualified URL when you host MathJax yourself.

Static exports no longer rely on Python or Kaleido. When you call `save()` with an image extension, `vistool` writes a self-contained HTML snapshot, captures it through `webshot2` (headless Chrome/Chromium), and trims the result with `magick`. These dependencies (`htmlwidgets`, `webshot2`, `magick`) are now imported automatically; ensure a recent Chrome/Chromium is available on your system and `vis$save("plot.png")` just works.

You can still call `save()` with `.html` to persist the interactive widget directly.

Pkgdown builds automatically inherit this MathJax wiring, so no extra `<script>` tags are required.

## Documentation roadmap

- [Loss functions](https://slds-lmu.github.io/vistool/articles/loss_functions.html) – Open when you need to compare predefined and custom regression or classification losses side by side.
- [Model predictions](https://slds-lmu.github.io/vistool/articles/model.html) – Visit to inspect 1D/2D mlr3 learners, add boundaries, and overlay training data.
- [Objective functions](https://slds-lmu.github.io/vistool/articles/objective.html) – Read when you explore built-in objectives, define custom ones, or visualize evaluation archives.
- [Optimization & traces](https://slds-lmu.github.io/vistool/articles/optimization_traces.html) – Use to understand optimizers, step size control, and how to display optimization progress.
- [Customization guide](https://slds-lmu.github.io/vistool/articles/customization_guide.html) – Start here when you want to tweak themes, colors, and styling precedence.
- [Advanced visualization](https://slds-lmu.github.io/vistool/articles/advanced_visualization.html) – Open for surface overlays, manual plot augmentations, and animation workflows.

## Contributing

For anyone interested in contributing to `vistool`, please see the [Developer reference](DEVELOPMENT.md).
